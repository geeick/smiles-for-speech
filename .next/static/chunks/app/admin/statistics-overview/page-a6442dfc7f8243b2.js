(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3596],{26597:(e,t,a)=>{"use strict";a.d(t,{tU:()=>D,av:()=>L,j7:()=>k,Xi:()=>T});var r=a(95155),s=a(12115),n=a(85185),i=a(46081),l=a(89196),o=a(28905),d=a(63655),c=a(94315),u=a(5845),f=a(61285),m="Tabs",[x,h]=(0,i.A)(m,[l.RG]),v=(0,l.RG)(),[j,p]=x(m),g=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:m="automatic",...x}=e,h=(0,c.jH)(o),[v,p]=(0,u.i)({prop:s,onChange:n,defaultProp:i});return(0,r.jsx)(j,{scope:a,baseId:(0,f.B)(),value:v,onValueChange:p,orientation:l,dir:h,activationMode:m,children:(0,r.jsx)(d.sG.div,{dir:h,"data-orientation":l,...x,ref:t})})});g.displayName=m;var b="TabsList",y=s.forwardRef((e,t)=>{let{__scopeTabs:a,loop:s=!0,...n}=e,i=p(b,a),o=v(a);return(0,r.jsx)(l.bL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:(0,r.jsx)(d.sG.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});y.displayName=b;var w="TabsTrigger",N=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,disabled:i=!1,...o}=e,c=p(w,a),u=v(a),f=F(c.baseId,s),m=E(c.baseId,s),x=s===c.value;return(0,r.jsx)(l.q7,{asChild:!0,...u,focusable:!i,active:x,children:(0,r.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:f,...o,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(s)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(s)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||i||!e||c.onValueChange(s)})})})});N.displayName=w;var C="TabsContent",R=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,forceMount:i,children:l,...c}=e,u=p(C,a),f=F(u.baseId,n),m=E(u.baseId,n),x=n===u.value,h=s.useRef(x);return s.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(o.C,{present:i||x,children:a=>{let{present:s}=a;return(0,r.jsx)(d.sG.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!s,id:m,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:s&&l})}})});function F(e,t){return"".concat(e,"-trigger-").concat(t)}function E(e,t){return"".concat(e,"-content-").concat(t)}R.displayName=C;var O=a(53999);let D=g,k=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(y,{ref:t,className:(0,O.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});k.displayName=y.displayName;let T=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N,{ref:t,className:(0,O.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});T.displayName=N.displayName;let L=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(R,{ref:t,className:(0,O.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});L.displayName=R.displayName},53999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},78294:(e,t,a)=>{Promise.resolve().then(a.bind(a,99931))},88482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var r=a(95155),s=a(12115),n=a(53999);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},99931:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(95155),s=a(12115),n=a(88482),i=a(26597),l=a(83540),o=a(8782),d=a(34e3),c=a(54811),u=a(94517),f=a(24026),m=a(3401),x=a(96025),h=a(16238),v=a(83394);function j(){let[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/admin/statistics"),a=await e.json(),r=[...a.selfProfiles||[],...a.lovedOnes||[]];t(r)}catch(e){console.error("Failed to fetch overview data:",e)}}()},[]);let a={"Under 18":0,"18-30":0,"31-45":0,"46-60":0,"Over 60":0};e.forEach(e=>{let t=e.age||0;t<18?a["Under 18"]++:t>=18&&t<=30?a["18-30"]++:t>=31&&t<=45?a["31-45"]++:t>=46&&t<=60?a["46-60"]++:a["Over 60"]++});let j=Object.entries(a).map(e=>{let[t,a]=e;return{name:t,value:a}}),p={Male:0,Female:0,Other:0};e.forEach(e=>{let t=(e.sex||"").toLowerCase();"male"===t?p.Male++:"female"===t?p.Female++:p.Other++});let g=Object.entries(p).map(e=>{let[t,a]=e;return{name:t,value:a}}),b={};e.forEach(e=>{let t=e.location||"Unspecified";b[t]=(b[t]||0)+1});let y=Object.entries(b).sort((e,t)=>t[1]-e[1]).slice(0,5).map(e=>{let[t,a]=e;return{name:t,value:a}}),w=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return e.length?(0,r.jsx)("div",{className:"grid gap-6",children:(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Overview Statistics"}),(0,r.jsx)(n.BT,{children:"Combined statistics for all consenting users"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)(i.tU,{defaultValue:"age",children:[(0,r.jsxs)(i.j7,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(i.Xi,{value:"age",children:"Age Distribution"}),(0,r.jsx)(i.Xi,{value:"gender",children:"Gender Distribution"}),(0,r.jsx)(i.Xi,{value:"location",children:"Top Locations"})]}),(0,r.jsx)(i.av,{value:"age",className:"mt-4",children:(0,r.jsx)("div",{className:"h-[400px] w-full",children:(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(o.r,{children:[(0,r.jsx)(d.F,{data:j,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,percent:a}=e;return"".concat(t,": ").concat((100*a).toFixed(0),"%")},outerRadius:150,fill:"#8884d8",dataKey:"value",children:j.map((e,t)=>(0,r.jsx)(c.f,{fill:w[t%w.length]},"cell-".concat(t)))}),(0,r.jsx)(u.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,r.jsx)(f.s,{})]})})})}),(0,r.jsx)(i.av,{value:"gender",className:"mt-4",children:(0,r.jsx)("div",{className:"h-[400px] w-full",children:(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(o.r,{children:[(0,r.jsx)(d.F,{data:g,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,percent:a}=e;return"".concat(t,": ").concat((100*a).toFixed(0),"%")},outerRadius:150,fill:"#8884d8",dataKey:"value",children:g.map((e,t)=>(0,r.jsx)(c.f,{fill:w[t%w.length]},"cell-".concat(t)))}),(0,r.jsx)(u.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,r.jsx)(f.s,{})]})})})}),(0,r.jsx)(i.av,{value:"location",className:"mt-4",children:(0,r.jsx)("div",{className:"h-[400px] w-full",children:(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(m.E,{data:y,layout:"vertical",margin:{top:20,right:30,left:60,bottom:5},children:[(0,r.jsx)(x.W,{type:"number"}),(0,r.jsx)(h.h,{dataKey:"name",type:"category"}),(0,r.jsx)(u.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,r.jsx)(f.s,{}),(0,r.jsx)(v.y,{dataKey:"value",fill:"#8884d8",children:y.map((e,t)=>(0,r.jsx)(c.f,{fill:w[t%w.length]},"cell-".concat(t)))})]})})})})]})})]})}):(0,r.jsx)("div",{className:"text-muted-foreground",children:"Loading overview statistics..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,4052,1922,8441,1684,7358],()=>t(78294)),_N_E=e.O()}]);