(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4594],{5408:(e,t,s)=>{Promise.resolve().then(s.bind(s,21241))},21241:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(95155),l=s(12115),r=s(88482),i=s(95784),n=s(83540),d=s(3401),c=s(96025),o=s(16238),h=s(94517),x=s(83394),u=s(54811),m=s(8782),f=s(34e3),p=s(83548),j=s(1379),g=s(24026),y=s(63807);function v(){let[e,t]=(0,l.useState)([]),[s,v]=(0,l.useState)([]),[b,N]=(0,l.useState)("both"),[w,S]=(0,l.useState)("all"),[C,R]=(0,l.useState)("all");(0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/admin/statistics"),s=await e.json();t(s.selfProfiles||[]),v(s.lovedOnes||[])}catch(e){console.error("Failed to fetch data:",e)}}()},[]);let B=[],O=Array.from(new Set((B="selfProfile"===b?e:"lovedOne"===b?s:[...e,...s]).map(e=>e.location||"Unspecified").filter(Boolean))),F=B.filter(e=>{let t=!0,s=!0;return"all"!==w&&("under18"===w?t=e.age<18:"18-30"===w?t=e.age>=18&&e.age<=30:"31-45"===w?t=e.age>=31&&e.age<=45:"46-60"===w?t=e.age>=46&&e.age<=60:"over60"===w&&(t=e.age>60)),"all"!==C&&(s=(e.location||"Unspecified")===C),t&&s}),Z={"Under 18":0,"18-30":0,"31-45":0,"46-60":0,"Over 60":0};F.forEach(e=>{e.age<18?Z["Under 18"]++:e.age>=18&&e.age<=30?Z["18-30"]++:e.age>=31&&e.age<=45?Z["31-45"]++:e.age>=46&&e.age<=60?Z["46-60"]++:Z["Over 60"]++});let k=Object.entries(Z).map(e=>{let[t,s]=e;return{name:t,value:s}}),E={Male:0,Female:0,Other:0};F.forEach(e=>{let t=(e.sex||"").toLowerCase();"male"===t?E.Male++:"female"===t?E.Female++:E.Other++});let U=Object.entries(E).filter(e=>{let[t,s]=e;return s>0}).map(e=>{let[t,s]=e;return{name:t,value:s}}),A={};F.forEach(e=>{var t,s;let a=null!==(s=null!==(t=e.diagnosis)&&void 0!==t?t:e.diagnosisStatus)&&void 0!==s?s:"Unspecified";a&&""!==a.trim()?A[a]=(A[a]||0)+1:A.Unspecified=(A.Unspecified||0)+1});let D=Object.entries(A).map(e=>{let[t,s]=e;return{name:t,value:s}}).sort((e,t)=>t.value-e.value),T={Yes:0,No:0};F.forEach(e=>{!0===e.seekingDiagnosis||!0===e.seekingSupport?T.Yes++:T.No++});let K=Object.entries(T).map(e=>{let[t,s]=e;return{name:t,value:s}}),W={};"lovedOne"!==b&&F.forEach(e=>{e.challenges&&Array.isArray(e.challenges)&&e.challenges.forEach(e=>{W[e]=(W[e]||0)+1})});let I=Object.entries(W).map(e=>{let[t,s]=e;return{name:t,value:s}}).sort((e,t)=>t.value-e.value).slice(0,10),L={};F.forEach(e=>{e.location?L[e.location]=(L[e.location]||0)+1:L.Unspecified=(L.Unspecified||0)+1});let P=Object.entries(L).map(e=>{let[t,s]=e;return{name:t,value:s}}).sort((e,t)=>t.value-e.value).slice(0,10),V=[];F.forEach(e=>{var t,s;let a=null!==(s=null!==(t=e.diagnosis)&&void 0!==t?t:e.diagnosisStatus)&&void 0!==s?s:"Unspecified",l=V.find(t=>t.age===e.age&&t.diagnosis===a);l?l.count++:V.push({age:e.age,diagnosis:a,count:1})});let _={};B.forEach(e=>{let t=e.location||"Unspecified";(!0===e.seekingDiagnosis||!0===e.seekingSupport)&&(_[t]=(_[t]||0)+1)});let M=Object.entries(_).map(e=>{let[t,s]=e;return{name:t,value:s}}).sort((e,t)=>t.value-e.value),z=M.length>0?M[0]:null,G=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82ca9d","#ffc658","#8dd1e1","#a4de6c","#d0ed57"];return(0,a.jsx)("div",{className:"space-y-6 px-4 md:px-8 lg:px-16 py-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Statistics"}),z&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Most people seeking diagnosis/support:"})," ",z.name," (",z.value,")"]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(i.Select,{value:b,onValueChange:N,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Show group"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"both",children:"Both"}),(0,a.jsx)(i.SelectItem,{value:"selfProfile",children:"Self Profiles"}),(0,a.jsx)(i.SelectItem,{value:"lovedOne",children:"Loved Ones"})]})]}),(0,a.jsxs)(i.Select,{value:w,onValueChange:S,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Filter by age"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"All Ages"}),(0,a.jsx)(i.SelectItem,{value:"under18",children:"Under 18"}),(0,a.jsx)(i.SelectItem,{value:"18-30",children:"18-30"}),(0,a.jsx)(i.SelectItem,{value:"31-45",children:"31-45"}),(0,a.jsx)(i.SelectItem,{value:"46-60",children:"46-60"}),(0,a.jsx)(i.SelectItem,{value:"over60",children:"Over 60"})]})]}),(0,a.jsxs)(i.Select,{value:C,onValueChange:R,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Filter by location"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"All Locations"}),O.map(e=>(0,a.jsx)(i.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Seeking Diagnosis/Support by Location"}),(0,a.jsx)(r.BT,{children:"Number of people seeking diagnosis/support in each location"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(d.E,{data:M,layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[(0,a.jsx)(c.W,{type:"number"}),(0,a.jsx)(o.h,{dataKey:"name",type:"category",width:80}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,a.jsx)(x.y,{dataKey:"value",fill:"#8884d8",children:M.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))})]})})})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Age Distribution"}),(0,a.jsx)(r.BT,{children:"Age groups of selected group"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.r,{children:[(0,a.jsx)(f.F,{data:k,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,percent:s}=e;return"".concat(t,": ").concat((100*s).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:k.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]})]})})})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Gender Distribution"}),(0,a.jsx)(r.BT,{children:"Gender breakdown of selected group"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.r,{children:[(0,a.jsx)(f.F,{data:U,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,percent:s}=e;return"".concat(t,": ").concat((100*s).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:U.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]})]})})})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Diagnosis Distribution"}),(0,a.jsx)(r.BT,{children:"Diagnosis status of selected group"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(d.E,{data:D,layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[(0,a.jsx)(c.W,{type:"number"}),(0,a.jsx)(o.h,{dataKey:"name",type:"category",width:80}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,a.jsx)(x.y,{dataKey:"value",fill:"#8884d8",children:D.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))})]})})})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Seeking Diagnosis/Support"}),(0,a.jsx)(r.BT,{children:"Users or loved ones seeking diagnosis/support"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.r,{children:[(0,a.jsx)(f.F,{data:K,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,percent:s}=e;return"".concat(t,": ").concat((100*s).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:K.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]})]})})})})]}),"lovedOne"!==b&&(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Top Challenges"}),(0,a.jsx)(r.BT,{children:"Most common challenges reported by users"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(d.E,{data:I,layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[(0,a.jsx)(c.W,{type:"number"}),(0,a.jsx)(o.h,{dataKey:"name",type:"category",width:80}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,a.jsx)(x.y,{dataKey:"value",fill:"#8884d8",children:I.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))})]})})})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Location Distribution"}),(0,a.jsx)(r.BT,{children:"Geographic distribution of users"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(d.E,{data:P,layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[(0,a.jsx)(c.W,{type:"number"}),(0,a.jsx)(o.h,{dataKey:"name",type:"category",width:80}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e," users"),"Count"]}),(0,a.jsx)(x.y,{dataKey:"value",fill:"#8884d8",children:P.map((e,t)=>(0,a.jsx)(u.f,{fill:G[t%G.length]},"cell-".concat(t)))})]})})})})]}),(0,a.jsxs)(r.Zp,{className:"md:col-span-2",children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Age vs Diagnosis"}),(0,a.jsx)(r.BT,{children:"Relationship between age and diagnosis"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(p.t,{margin:{top:20,right:20,bottom:20,left:20},children:[(0,a.jsx)(c.W,{type:"number",dataKey:"age",name:"Age",domain:[0,100],label:{value:"Age",position:"bottom"}}),(0,a.jsx)(o.h,{type:"category",dataKey:"diagnosis",name:"Diagnosis",width:100}),(0,a.jsx)(j.K,{type:"number",dataKey:"count",range:[50,500],name:"Count"}),(0,a.jsx)(h.m,{cursor:{strokeDasharray:"3 3"},formatter:(e,t,s)=>"Count"===t?[e,t]:[s.payload.diagnosis,"Diagnosis"]}),(0,a.jsx)(g.s,{}),(0,a.jsx)(y.X,{name:"Users",data:V,fill:"#8884d8"})]})})})})]})]})]})})}},53999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(52596),l=s(39688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},88482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>h});var a=s(95155),l=s(12115),r=s(53999);let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});i.displayName="Card";let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...l})});o.displayName="CardContent";let h=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})});h.displayName="CardFooter"},95784:(e,t,s)=>{"use strict";s.d(t,{Select:()=>o,SelectContent:()=>f,SelectItem:()=>p,SelectTrigger:()=>x,SelectValue:()=>h});var a=s(95155),l=s(12115),r=s(11721),i=s(66474),n=s(47863),d=s(5196),c=s(53999);let o=r.bL;r.YJ;let h=r.WT,x=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(r.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=r.l9.displayName;let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=r.PP.displayName;let m=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=r.wn.displayName;let f=l.forwardRef((e,t)=>{let{className:s,children:l,position:i="popper",...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,a.jsx)(u,{}),(0,a.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(m,{})]})})});f.displayName=r.UC.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=r.JU.displayName;let p=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(r.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(r.p4,{children:l})]})});p.displayName=r.q7.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=r.wv.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,5057,1922,1971,8441,1684,7358],()=>t(5408)),_N_E=e.O()}]);